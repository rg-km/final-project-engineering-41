package api

import (
	"encoding/json"
	"net/http"
	//"github.com/ruang-guru/playground/backend/database/assigment/cashier-app/repository"
)

type KategoriKelasRequest struct {
	NamaKategori string `json:"nama_kategori"`
}

type KategoriKelasResponse struct {
	data        repository.KategoriKelas `json:"data"`
	message     string                   `json:"message"`
	status_code int                      `json:"status_code"`
}

func (api *API) CreateCategoryKelas(w http.ResponseWriter, req *http.Request) {
	api.AllowOrigin(w, req)
	var kategori KategoriKelasRequest
	err := json.NewDecoder(req.Body).Decode(&kategori)
	if err != nil {
		w.WriteHeader(http.StatusBadRequest)
		return
	}

	category, err := api.kategoriKelasRepo.StoreCategoryKelas(kategori.NamaKategori)
	encoder := json.NewEncoder(w)
	defer func() {
		if err != nil {
			w.WriteHeader(http.StatusBadRequest)
			encoder.Encode(CartErrorResponse{Error: err.Error()})
		}
	}()

	encoder.Encode(KategoriKelasResponse{category, "Berhasil di tambahkan", 200})
}
